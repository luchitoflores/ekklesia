{%extends 'base.html'%}

{%load tags%}

{%block title%}Agregar Feligreses{%endblock%}
{%block content_title%}{{block.super}}Agregar Feligreses{%endblock%}

{%block content%}

<!-- Div para manejar mensajes de error -->
<div id="id_mensaje">
	
</div>


<!-- Pestañas para datos personales, padre y madre -->
<ul class='nav nav-tabs'>
	<li class='active'><a href="#id_datos_personales" data-toggle='tab'>Datos Personales</a></li>
</ul>

<div class="tab-content">
	<div id='id_datos_personales' class='tab-pane active'>
		<form id='id_form_usuario_create' class='form-horizontal'>
			<!--<select name="" id="id_padre"></select>-->
			<!--Input para typeahead de bootstrap
			<input type='hidden' id='id_autocomplete'>
			Input para el plugin select2
			<input type='hidden' id='id_autocomplete'> -->
			
				<div class="row">
					<div class="span10">
						<div class="control-group">
							<label class="control-label">{{perfil_form.dni.label}}</label>
							<div class="controls">
								{{perfil_form.dni}}
							</div>
							<div class="controls">{{perfil_form.dni.help_text}}</div>
						</div>

						{% for f in usuario_form%}

						<div class="control-group">
							<label class="control-label">{{f.label}}</label>
							<div class="controls">{{f}}</div>
							<div class="controls">{{f.help_text}}</div>
						</div>
						{%endfor%}
						{% for f in perfil_form%}
						{%if f.label != 'Dni' and f.label != 'Sexo' and f.label != 'Padre' and f.label != 'Madre'%}
						<div class="control-group">
							<label class="control-label">{{f.label}}</label>
							<div class="controls">{{f}}</div>
							<div class="controls">{{f.help_text}}</div>
						</div>
						{%endif%}

						{%if f.label == perfil_form.sexo.label%}
						<label for="" class='control-label'>{{f.label}}</label>
						<div class="controls nav">
							{% for radio in perfil_form.sexo %}
							{{ radio }}
							{% endfor %}
						</div>
						{%endif%}
						{%if f.label == perfil_form.padre.label or f.label == 'Madre' %}
						<div class="control-group">
							<label class="control-label">{{f.label}}</label>
							<div class="controls">
								{{f}}
								<a href="#id_crear_{{f.label|lower}}" class='btn btn-primary' data-toggle='modal'>+</a>
							</div>
							<div class="controls">{{f.help_text}}</div>
						</div>
						{%endif%}

						{%endfor%}

						<div class="form-actions">
							<input type="submit" value='Enviar' class="btn btn-primary">
							<a href="{%url 'usuario_list'%}" class='btn btn-primary'>Cancelar</a>
						</div>
					</div>
				</div>
			
		</form>
	</div>
</div>



<!-- Inclusion de Modal de Busqueda-->
{%include 'modal.html'%}

<!-- Modal para crear padre-->
<div id="id_crear_padre" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
		<h3>Búsqueda de Feligreses</h3>
	</div>
	<div class="modal-body">
		<form id='id_form_crear_padre' class='form-horizontal' method='POST'>
			{%feligres%}
			{% include 'usuario/feligres.html'%}
			<div class="control-group">
				<div class='controls'>
					<input type="submit" value='Enviar' class='btn btn-primary'>
				</div>
			</div>
		</form>

	</div>
	<div class="modal-footer">
		<a href="." class="btn btn-primary" data-dismiss="modal">Cancelar</a>
	</div>
</div>

<!-- Modal para crear madre-->
<div id="id_crear_madre" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
		<h3>Búsqueda de Feligreses</h3>
	</div>
	<div class="modal-body">
		<form id='id_form_crear_madre' class='form-horizontal' method='POST'>
			{%feligres%}
			{% include 'usuario/feligres.html'%}
			<div class="control-group">
				<div class='controls'>
					<input type="submit" value='Enviar' class='btn btn-primary'>
				</div>
			</div>
		</form>

	</div>
	<div class="modal-footer">
		<a href="." class="btn btn-primary" data-dismiss="modal">Cancelar</a>
	</div>
</div>

{% endblock%}